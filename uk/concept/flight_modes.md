# Режими польоту (для розробників)

_Режими польоту_ визначають як автопілот реагує на дії користувача та керує пересуванням рухомого засобу. Вони вільним чином згруповані у _ручні_, _допоміжні_ та _автономні_ режими, засновуючись на рівні/типі керування що надається автопілотом. Пілот перемикається між режимами польоту за допомогою перемикачів на пульті дистанційного керування або за допомогою наземної станції керування.

Не всі режими польоту доступні на всіх типах апаратів, а деякі режими поводяться по-різному на різних типах апаратів (як описано нижче). Нарешті, деякі режими польоту мають сенс лише за особливих умов перед та під час польоту (напр. блокування GPS). Система не дозволить переходи в ці режими, поки не будуть виконані відповідні умови.

Подальші розділи надають огляд цих режимів, за якими йде [діаграма оцінки режимів польоту](#flight-mode-evaluation-diagram) яка показує умови за яких PX4 перейде до нового режиму.

:::note
Ви можете знайти документацію по режимах польоту орієнтовану на користувача в:

- [Режими польоту (Мультикоптер)](../flight_modes_mc/README.md)
- [Режими польоту (Фіксоване крило)](../flight_modes_fw/README.md)
- [Режими польоту (ВЗІП)](../flight_modes_vtol/README.md)
- [Режими польоту/їзди (Ровер)](../flight_modes_rover/README.md)

:::

## Опис режимів польоту

### Ручні режими польотів

"Ручні" режими - це ті, де користувач має прямий контроль над засобом за допомогою пульту радіо керування (або джойстика). Рух рухомого засобу завжди слідує за рухом органів управління, але рівень/тип реакція змінюється в залежності від режиму. Наприклад, досвідчені пілоти можуть використовувати режими, які дають пряму передачу позицій органів управління до приводів, тоді як початківці часто будуть обирати режими, яки менше реагують на раптові зміни положень органів управління.

- **Ровери/човни**

  - **MANUAL/STABILIZED/ACRO:** Керуючи вхідні команди пілота (необроблені вхідні дані користувача з передавача радіо керування) передаються напряму до розподілу керування.

- **Літальний апарат з фіксованим крилом:**

  - **MANUAL:** Керуючи вхідні команди пілота (необроблені вхідні дані користувача з передавача радіо керування) передаються напряму до розподілу керування.
  - **STABILIZED:** Вхідні команди крену та тангажу пілота передаються до автопілота як кутові команди, тоді як команди рискання відправляються напряму на кермо через розподіл керування (ручне управління) Якщо органи управління для крену та тангажу пульту РК центровані, автопілот регулює кути нахилу крену та тангажу до нуля, отже стабілізуючи (вирівнюючи) положення відносно будь-яких збурень вітру. Однак у цьому режимі положення літального апарату не контролюється автопілотом, тому положення може плисти через вітер. З ненульовими значеннями крену, рухомий засіб здійснює скоординований поворот щоб досягти нульового бічного зсуву (прискорення у напрямку осі Y, тобто вбік є нульовим). Під час скоординованого повороту для керування бічним зсувом використовується кермо, а будь-які ручні команди рискання додаються до цього.
  - **ACRO:** Вхідні команди пілота передаються як команди _швидкості_ крену, тангажу та рискання до автопілота. Автопілот контролює кутові швидкості. Тяга передається напряму до розподілу керування.

- **Мультикоптери:**

  - **MANUAL/STABILIZED** Команди пілота передаються як команди _кутів_ крену та тангажу, а рискання як команда _швидкості_. Тяга передається напряму до розподілу керування. Автопілот контролює положення, це означає що він регулює кути крену та тангажу до нуля коли органи керування пульту РК центровані, як наслідок вирівнюючи положення. Однак у цьому режимі положення літального апарату не контролюється автопілотом, тому положення може плисти через вітер.

    :::note
Для мультиротора, ручний та стабілізований режими однакові.
:::

  - **ACRO:** Вхідні команди пілота передаються як команди _швидкості_ крену, тангажу та рискання до автопілота. Автопілот контролює кутові швидкості, але не положення. Отже, якщо органи керування пульту РК центровані, рухомий засіб не буде вирівняно. Це дозволяє мультиротору повністю обернутись. Тяга передається напряму до розподілу керування.

### Допоміжні режими польоту

"Допоміжні" режими також контролюються користувачем, але пропонують певний рівень "автоматичної" допомоги, наприклад автоматично тримаючи позицію/гапрямок проти вітру. Допоміжні режими часто полегшують здобуття або відновлення контрольованого польоту.

- **ALTCTL** (Управління висотою)

  - **Літальний апарат з фіксованим крилом:** коли органи керування пульту РК для крену, тангажу та рискання (КТР) центровані (або менше деякого визначеного граничного діапазону) апарат повернеться до прямого та вирівняного польоту та буде тримати поточну висоту. Його позиція по x та y буде плисти за вітром.
  - **Мультикоптери:** Команди крену, тангажу та рискання такі ж самі як у режимі Stabilised. Вхідні команди тяги вказують зростання або зменшення висоти із заздалегідь визначеною швидкістю. Тяга має велику мертву зону. Центрований орган керування тягою тримає стабільну висоту. Автопілот контролює тільки висоту, тому положення x,y може плисти через вітер.

- **POSCTL** (Управління позицією)

  - **Літальний апарат з фіксованим крилом:** Нульові вхідні команди (центровані органи керування) дають рівномірний політ та він буде рухатися проти вітру якщо потрібно підтримувати пряму лінію.
  - **Мультикоптери:** Крен керує швидкістю "вліво-вправо", тангаж контролює швидкість вперед-назад над землею. Рискання контролює швидкість рискання як в режимі MANUAL. Тяга контролює зростання/зменшення висоти як в режимі ALTCTL. Це означає що позиція апарату x, y, z утримується автопілотом стабільною проти будь-яких збурень вітру, коли органи управління КТР центровані.

### Режими автоматичного польоту

"Автоматичні" режими - це ті, коли контролер майже не потребує користувацьких команд (наприклад зліт, посадка та польотні завдання).

- **AUTO_LOITER** (Блукання)

  - **Літальний апарат з фіксованим крилом:** Літальний апарат блукає навколо поточної позиції на поточній висоті (або можливо дещо вище, що добре для ситуацій 'втрачаємо його').
  - **Мультикоптери:** Мультикоптер ширяє/блукає у поточному положенні на поточній висоті.

- **AUTO_RTL** (Повернення до старту)

  - **Літальний апарат з фіксованим крилом:** Літальний апарат повертається до домашньої позиції та блукає колами навколо цієї позиції.
  - **Мультикоптери:** Мультикоптер повертається прямою лінією на поточній висоті (якщо поточна висота вища, ніж домашнє положення + [RTL_RETURN_ALT](../advanced_config/parameter_reference.md#RTL_RETURN_ALT)або на висоті [RTL_RETURN_ALT](../advanced_config/parameter_reference.md#RTL_RETURN_ALT) (якщо [RTL_RETURN_RETALT](../advanced_config/parameter_reference.md#RTL_RETURN_ALT) вище за поточну висоту), а потім приземлиться автоматично.

- **AUTO_MISSION** (Завдання)
  - **Усі типи літальних апаратів:** Літальний апарат дотримується запрограмованого завдання що відправляється наземною станцією керування (GCS). Якщо завдання не отримано, замість цього ЛА буде в режимі LOITER в поточному положенні.
  - **_OFFBOARD_** (Зовнішній комп'ютер) В цьому режимі опорне/цільове/задане значення позиції, швидкості або положення надається супутнім комп'ютером під'єднаним через послідовний кабель та MAVLink. Заданні значення для зовнішніх комп'ютерів може бути надано API на зразок [MAVSDK](http://mavsdk.mavlink.io) або [MAVROS](https://github.com/mavlink/mavros).

## Діаграма оцінки режимів польоту

![Діаграма плину команд](../../assets/diagrams/commander-flow-diagram.png)
