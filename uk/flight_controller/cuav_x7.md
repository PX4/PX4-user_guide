# Польотний контролер CUAV X7

:::warning PX4 не виробляє цей (або будь-який) автопілот. Звертайтесь до [виробника](https://www.cuav.net) щодо питань апаратного забезпечення або питань відповідності.
:::

Контролер польоту [X7](http://doc.cuav.net/flight-controller/x7/en/x7.html)<sup>&reg;</sup> - це високоякісний автопілот. Це ідеальний вибір для промислових дронів і великомасштабних важких дронів. В основному постачається комерційним виробникам.

![CUAV x7](../../assets/flight_controller/cuav_x7/x7.jpg)

Контролер польоту використовує модульний дизайн і може бути поєднаний з різними базовими платами. Ви можете розробити спеціалізовану плату-носій для вашого БПЛА, щоб покращити інтеграцію комерційних систем, зменшити кількість проводів, підвищити надійність системи та підвищити конкурентоспроможність вашого БПЛА (наприклад, інтегруючи датчики швидкості повітря, телеметрію або навіть супутниковий комп'ютер на платі-носії). CUAV також надає вам на вибір різноманітні несучі плати.

::: info Цей контролер польоту [підтримується виробником](../flight_controller/autopilot_manufacturer_supported.md).
:::

## Особливості

- Внутрішнє поглинання ударів
- Модульна конструкція, може бути саморобною несучою платою
- Підтримка USB_HS, швидше завантаження журналів (PX4 ще не підтримується)
- Підтримка більшої кількості виходів DShot
- Підтримка нагріву IMU, покращення роботи датчика
- Виділений порт для акумулятора CAN
- 3 комплекти датчиків IMU
- Автомобільний компас RM3100
- Високопродуктивний процесор

:::tip
Документація виробника [CUAV Docs](https://doc.cuav.net/flight-controller/x7/en/) є канонічним джерелом для X7. Вони повинні використовуватися за перевагою, оскільки вони містять найбільш повну та актуальну інформацію.
:::

## Короткий опис

- Головний FMU процесор: STM32H743
- Бортові сенсори:

  - Акселерометр/Гіроскоп: ICM-20689
  - Прискорювач/гіроскоп: ICM-20649
  - Акселерометр/Гіроскоп: BMI088
  - Магнітометр: RM3100
  - Барометр: MS5611\*2

- Інтерфейси:
  - 14 ШІМ-виходів （12 підтримує Dshot）
  - Підтримка декількох входів RC (SBU / CPPM / DSM)
  - Аналоговий / PWM вхід RSSI
  - 2 GPS порти (GPS і UART4 порти)
  - 4 шини i2c (два виділені порти i2c)
  - 2 порти CAN шини
  - 2 порти живлення (Power A - загальний інтерфейс адаптера, Power C - інтерфейс акумулятора DroneCAN)
  - 2 входи АЦП
  - 1 USB порт
- Система живлення:
  - Живлення: 4.3~5.4В
  - Вхід USB: 4.75~5.25В
  - Вхід сервоприводу: 0~36V
- Вага та розміри:
  - Вага: 101 g
- Інші характеристики:
  - Робоча температура: -20 ~ 80°c (виміряне значення)
  - Три імуси
  - Підтримка компенсації температури
  - Внутрішнє поглинання ударів

::: info
Коли він працює на прошивці PX4, працює лише 8 pwm, решта 6 pwm все ще адаптуються, тому зараз він не сумісний з VOLT.
:::

## Де придбати

[Магазин CUAV](https://store.cuav.net)

[CUAV Aliexpress](https://www.aliexpress.com/item/4001042683738.html?spm=a2g0o.detail.1000060.2.1ebb2a9d3WDryi&gps-id=pcDetailBottomMoreThisSeller&scm=1007.13339.169870.0&scm_id=1007.13339.169870.0&scm-url=1007.13339.169870.0&pvid=f0df2481-1c0a-44eb-92a4-9c11c6cb3d06&_t=gps-id:pcDetailBottomMoreThisSeller,scm-url:1007.13339.169870.0,pvid:f0df2481-1c0a-44eb-92a4-9c11c6cb3d06,tpp_buckets:668%230%23131923%2320_668%23808%234094%23518_668%23888%233325%2319_668%234328%2319934%23630_668%232846%238115%23807_668%232717%237566%23827_668%231000022185%231000066058%230_668%233468%2315607%2376)

## З'єднання (Проводка)

[Швидке підключення CUAV X7](http://doc.cuav.net/flight-controller/x7/en/quick-start/quick-start-x7.html)

## Розмір та роз'єми

![CUAV x7](../../assets/flight_controller/cuav_x7/x7-size.jpg)

![Роз'єми X7](../../assets/flight_controller/cuav_x7/x7-pinouts.jpg)

:::warning
Порт `RCIN` призначено лише для живлення RC-приймача і його не можна підключати до жодного джерела живлення/навантаження.
:::

## Номінальна напруга

_X7 AutoPilot_ може мати потрійне резервування джерела живлення, якщо до нього під'єднано три джерела живлення. Шини живлення такі: **POWERA**, **POWERC** і **USB**.

::: info Вихідні шини живлення **PWM OUT** (від 0В до 36В) не живлять плату контролера польоту (і не живляться від неї). Ви повинні подати живлення на один з виводів **POWERA**, **POWERC** або **USB**, інакше плата буде знеструмлена.
:::

**Максимальна напруга нормальної роботи**

За таких умов всі джерела живлення будуть використовуватися в цьому порядку для живлення системи:

1. **POWERA** та **POWERC** входи (від 4,3 В до 5,4 В)
2. **USB** вхід (4.75В до 5.25В)

## Збірка прошивки

:::tip
Більшості користувачів не потрібно збирати цю прошивку! Вона попередньо зібрана і автоматично встановлюється за допомогою _QGroundControl_ при підключенні відповідного обладнання.
:::

Щоб [зібрати PX4](../dev_setup/building_px4.md) для цього контролера:

```
make cuav_x7pro_default
```

## Захист від перенапруги

_X7_ має захист від перенапруги на периферійних пристроях з напругою 5 Вольт і 5 Вольт високої потужності, який обмежує струм до 2,5 А. _X7_ має захист від короткого замикання.

:::warning
На роз'єми, позначені як контакт 1, можна подавати до 2,5 А (хоча вони розраховані лише на 1 А).
:::

## Відладочний порт

Консоль послідовного доступу до системи та інтерфейс SWD працюють через порт **DSU7**. Просто підключіть кабель FTDI до роз'єму DSU7 (у списку продуктів є кабель CUAV FTDI).

![Debug port (DSU7)](../../assets/flight_controller/cuav_v5_plus/debug_port_dsu7.jpg)

Системна консоль [PX4](../debug/system_console.md) та інтерфейс [SWD](../debug/swd_debug.md) працюють через порт **FMU Debug** (`DSU7`).

Відладочний порт (`DSU7`) використовує роз'єм [JST BM06B](https://www.digikey.com.au/product-detail/en/jst-sales-america-inc/BM06B-GHS-TBT-LF-SN-N/455-1582-1-ND/807850) і має наступну розводку:

| Pin     | Сигнал         | Вольтаж |
| ------- | -------------- | ------- |
| 1 (red) | 5V+            | +5В     |
| 2 (blk) | DEBUG TX (OUT) | +3.3В   |
| 3 (blk) | DEBUG RX (IN)  | +3.3В   |
| 4 (blk) | FMU_SWDIO      | +3.3В   |
| 5 (blk) | FMU_SWCLK      | +3.3В   |
| 6 (blk) | GND            | GND     |

CUAV надає спеціальний відладочний кабель, який можна підключити до порту `DSU7`. Він розділяє кабель FTDI для підключення [PX4 System Console](../debug/system_console.md) до USB-порту комп'ютера і виводи SWD, які використовуються для налагодження SWD/JTAG. Відладочний кабель, що входить до комплекту, не підключається до контакту (1) порту SWD `Vref`.

![Відладочний кабель CUAV](../../assets/flight_controller/cuav_v5_plus/cuav_v5_debug_cable.jpg)

:::warning
Вивід Vref SWD (1) використовує 5В як Vref, але процесор працює при напрузі 3,3В!

Деякі JTAG-адаптери (SEGGER J-Link) використовують напругу Vref для встановлення напруги на лініях SWD. Для прямого підключення до _Segger Jlink_ ми рекомендуємо використовувати 3,3 вольта з контакту 4 роз'єму з позначкою `DSM`/`SBUS`/`RSSI` для забезпечення `Vtref` на JTAG (тобто для забезпечення 3,3 В і _NOT_ 5 В).
:::

## Підтримувані платформи / Airframes

Будь-який мультикоптер / літак / наземна платформа чи човен, який може керуватися звичайними РК сервоприводами або сервоприводами Futaba S-Bus. Повний набір підтримуваних конфігурацій можна переглянути в [Довіднику авіаційних платформ](../airframes/airframe_reference.md).

## Подальша інформація

- [Швидкий старт](http://doc.cuav.net/flight-controller/x7/en/quick-start/quick-start-x7.html)
- [Документація CUAV](http://doc.cuav.net)
- [схема x7](https://github.com/cuav/hardware/tree/master/X7_Autopilot)
