# Основи підключення дротів

Кабелі - це поширений джерело [електромагнітних перешкод (EMI)](https://en.wikipedia.org/wiki/Electromagnetic_interference), які можуть викликати проблеми, включаючи відхилення, "туалетне ковзання" та загалом погане керування. Цих проблем можна уникнути, використовуючи відповідне кабелювання в БПЛА.

Слід пам'ятати наступні базові концепції при проектуванні кабелювання дрона:

- Кабелі високої потужності та сигнальні кабелі повинні бути розділені настільки, наскільки це практично.
- Довжина кабелів повинна бути мінімальною, достатньою для зручного оброблення провідних компонентів. Натяг дроту повинен бути достатнім, щоб витримати можливі деформації фюзеляжу навіть при аварійній посадці (дроти не повинні бути першим, що ламається).
- Петлі кабелів для зменшення зайвої довжини слід уникати - використовуйте коротші довжини!
- Для цифрових сигналів ви можете зменшити швидкість передачі даних, щоб зменшити випромінювану енергію та збільшити надійність передачі даних. Це означає, що ви можете використовувати більш довгі кабелі, коли високі швидкості передачі даних не потрібні.

## Проводка сигналу

Сигнальні протоколи мають різні характеристики, тому кабелі, що використовуються у кожному випадку, потребують трохи різних технічних характеристик.

Ця тема надає конкретні вказівки щодо кабелювання для різних сигнальних протоколів, разом з [колірною кодуванням](#cable-colour-coding), яке використовується кількома різними виробниками апаратного забезпечення дронів.

### Кабель I2C

[Шина I2C](https://en.wikipedia.org/wiki/I%C2%B2C) широко використовується для підключення датчиків. Кольори кабелів від кількох постачальників вказані в наступній таблиці.

| Сигнал | Колір Pixhawk     | Кольори ThunderFly  | Кольори CUAV (I2C/CAN) |
| ------ | ----------------- | ------------------- | ---------------------- |
| +5V    | ![red][1] Red     | ![red][1] Red       | ![red][1] Red          |
| SCL    | ![black][2] Black | ![yellow][3] Yellow | ![white][4] White      |
| SDA    | ![black][2] Black | ![green][5] Green   | ![yellow][3] Yellow    |
| GND    | ![black][2] Black | ![black][2] Black   | ![black][2] Black      |

Стандарт [Dronecode](https://github.com/pixhawk/Pixhawk-Standards/blob/master/DS-009%20Pixhawk%20Connector%20Standard.pdf) передбачає підтяжний резистор 1,5 кОм на сигналах SDA та SCL в автопілоті.

#### Повернення кабелю

Сигнал шини I2C та електромагнітна сумісність можуть бути значно покращені за допомогою належного скручування кабельних жил. [Закручені пари](https://en.wikipedia.org/wiki/Twisted_pair) особливо важливі для підключення датчиків.

- 10 обертань для кожної пари SCL/+5V та SDA/GND на кожні 30 см довжини кабелю. ![I²C JST-GH cable](../../assets/hardware/cables/i2c_jst-gh_cable.jpg)
- 4 обертання обох пар разом на 30 см довжини кабелю. ![I²C JST-GH connector detail](../../assets/hardware/cables/i2c_jst-gh_connector.jpg)

При використанні відповідних скручених парних кабелів шина I²C, як правило, підходить для повітряних конструкцій масштабу підметра. Для великих літаків використання інтерфейсу на основі CAN або іншої диференційної сигнальної передачі, як правило, є надійнішим.

:::info Ця рекомендація щодо довжини кабелю/перемички була успішно використана з датчиками I2C, включаючи датчик швидкості повітря [ThunderFly TFSLOT](../sensor/airspeed_tfslot.md) та [лічильник обертів TFRPM01 ThunderFly](../sensor/thunderfly_tachometer.md).
:::

#### Підтягуючі резистори

Підтяжки потрібні для всіх кінців шини I2C. Це діє як [сигнальна завершення](https://en.wikipedia.org/wiki/Electrical_termination) і як генератор сигналу пасивного автобусу.

Іноді для перевірки правильного значення підтяжних резисторів потрібне вимірювання осцилографом. Сигнали на шині I2C повинні мати чіткі гострі прямокутні краї та амплітуду кількох вольт. У випадку, якщо сигнал має низьку амплітуду, значення підтяжних резисторів занадто низьке і його слід зменшити. У випадку закруглених сигналів, значення підтяжних резисторів занадто високе.

### UAVCAN cables

| Сигнал | Pixhawk           | ThunderFly          | Zubax               | CUAV (I2C/CAN)      |
| ------ | ----------------- | ------------------- | ------------------- | ------------------- |
| +5V    | ![red][1] Red     | ![red][1] Red       | ![red][1] Red       | ![red][1] Red       |
| CAN_H  | ![black][2] Black | ![white][4] White   | ![white][4] White   | ![white][4] White   |
| CAN_L  | ![black][2] Black | ![yellow][3] Yellow | ![yellow][3] Yellow | ![yellow][3] Yellow |
| GND    | ![black][2] Black | ![black][2] Black   | ![black][2] Black   | ![black][2] Black   |

#### Cable Twisting

Кабелі CAN також повинні бути скручені, з точно такої ж причини, що і кабелі I2C. Для CAN рекомендовано використовувати закручування:

- 10 обертань для кожної пари GND/+5V та CAN_L/CAN_H на кожні 30 см довжини кабелю. ![CAN JST-GH cable](../../assets/hardware/cables/can_jst-gh_cable.jpg)
- 4 обертання обох пар разом на 30 см довжини кабелю.

### SPI (питома споживана потужність)

[SPI](https://en.wikipedia.org/wiki/Serial_Peripheral_Interface) є синхронним послідовним інтерфейсом зв'язку, який використовується для підключення швидших датчиків та пристроїв. Цей протокол зазвичай використовується для підключення [оптичних потокових](../sensor/optical_flow.md) датчиків або спеціальних телеметричних модемів.

| Сигнал | Pixhawk Color     | ThunderFly color    |
| ------ | ----------------- | ------------------- |
| +5V    | ![red][1] Red     | ![red][1] Red       |
| SCK    | ![black][2] Black | ![yellow][3] Yellow |
| MISO   | ![black][2] Black | ![blue][6] Blue     |
| MOSI   | ![black][2] Black | ![green][5] Green   |
| CS!    | ![black][2] Black | ![white][4] White   |
| CS2    | ![black][2] Black | ![blue][6] Blue     |
| GND    | ![black][2] Black | ![black][2] Black   |

### UART

UART використовується для підключення периферійних пристроїв до автопілота. За замовчуванням UART не підтримує мережу, тому він безпосередньо з'єднує два пристрої один з одним. Це часто використовується для підключення автопілота та [радіомодему](../telemetry/index.md).

CTS та RTS - це сигнали, які використовуються для позначення передачі даних на контактах TX/RX. Цей механізм рукостискання збільшує надійність передачі даних. CTS та RTS можуть залишатися вільними, коли їх не використовує пристрій.

Кабель підключення не перетнутий. Отже, необхідно підключати лише автопілот та периферійні пристрої за допомогою цього прямого кабелю. Пристрій повинен перетнути проводку внутрішньо, помінявши піни RX/TX та RTS/CTS.

| Сигнал | Колір Pixhawk     | ThunderFly color    |
| ------ | ----------------- | ------------------- |
| +5V    | ![red][1] Red     | ![red][1] Red       |
| TX     | ![black][2] Black | ![white][4] White   |
| RX     | ![black][2] Black | ![green][5] Green   |
| CTS    | ![black][2] Black | ![blue][6] Blue     |
| RTS    | ![black][2] Black | ![yellow][3] Yellow |
| GND    | ![black][2] Black | ![black][2] Black   |

Сигнали UART є поширеними джерелами низькочастотних ЕМП, тому довжина кабелю повинна бути мінімізована настільки, наскільки це можливо. Для UART-кабелів не потрібно обертати кабель.

### GPS(UART) &  SAFETY

[Приймачі GPS та магнітометри](../gps_compass/index.md) зазвичай дуже чутливі до ЕМП. Тому їх слід монтувати подалі від джерел радіочастот (кабельного високовольтного живлення, регуляторів обертання, радіомодемів та їх антени). Це може бути недостатньо, якщо кабельне з'єднання погано спроектоване.

| Сигнал          | Pixhawk Color     | ThunderFly color    |
| --------------- | ----------------- | ------------------- |
| +5V             | ![red][1] Red     | ![red][1] Red       |
| TX              | ![black][2] Black | ![white][4] White   |
| RX              | ![black][2] Black | ![green][5] Green   |
| SCL             | ![black][2] Black | ![yellow][3] Yellow |
| SDA             | ![black][2] Black | ![green][5] Green   |
| SAFETY_SW       | ![black][2] Black | ![white][4] White   |
| SAFETY_SW_LED | ![black][2] Black | ![blue][6] Blue     |
| +3v3            | ![black][2] Black | ![red][1] Red       |
| BUZZER          | ![black][2] Black | ![blue][6] Blue     |
| GND             | ![black][2] Black | ![black][2] Black   |

### GPS

| Сигнал | Колір Pixhawk     | ThunderFly колір    |
| ------ | ----------------- | ------------------- |
| +5V    | ![red][1] Red     | ![red][1] Red       |
| TX     | ![black][2] Black | ![white][4] White   |
| RX     | ![black][2] Black | ![green][5] Green   |
| SCL    | ![black][2] Black | ![yellow][3] Yellow |
| SDA    | ![black][2] Black | ![green][5] Green   |
| GND    | ![black][2] Black | ![black][2] Black   |

Кабель GPS підключається як до шин UART, так і до шини I2C. Оскільки скручування UART не застосовується, довжина кабелю повинна бути мінімізована настільки, наскільки це можливо.

### Аналоговий сигнал (модуль живлення)

| Сигнал  | Колір Pixhawk     | ThunderFly колір    | Колір CUAV          |
| ------- | ----------------- | ------------------- | ------------------- |
| VCC     | ![red][1] Red     | ![red][1] Red       | ![red][1] Red       |
| VCC     | ![black][2] Black | ![red][1] Red       | ![red][1] Red       |
| CURRENT | ![black][2] Black | ![white][4] White   | ![white][4] White   |
| VOLTAGE | ![black][2] Black | ![yellow][3] Yellow | ![yellow][3] Yellow |
| GND     | ![black][2] Black | ![black][2] Black   | ![black][2] Black   |
| GND     | ![black][2] Black | ![black][2] Black   | ![black][2] Black   |

Цей роз'єм - це приклад поєднання відносно високої потужності та низького напруги сигналізації. На жаль, витягування застосовується лише для високовольтних дротів GND та VCC. Це не дуже допомагає для шумного читання аналогових сигналів автопілотом.

### БЕЗПЕКА

| Сигнал          | Pixhawk Color     | ThunderFly color  |
| --------------- | ----------------- | ----------------- |
| SAFE_VCC        | ![red][1] Red     | ![red][1] Red     |
| SAFETY_SW_LED | ![black][2] Black | ![blue][6] Blue   |
| SAFETY_SW       | ![black][2] Black | ![white][4] White |
| BUZZER          | ![black][2] Black | ![blue][6] Blue   |
| +5V             | ![black][2] Black | ![red][1] Red     |
| GND             | ![black][2] Black | ![black][2] Black |

## Високовольтне підключення

Для високовольтного проводування найважливішим критерієм проектування є належна товщина дроту, щоб забезпечити достатній струмовий потік. Загальна вимога до перерізу - площа 1 мм² на кожні 8А струму проводу.

Хоча це рідко практично, корисно мати позитивні та негативні проводи скручені разом.

ЕМП від високовольтного кабелю має значний вплив на магнітометри. З цієї причини завжди потрібно велике відокремлення між високовольтними кабелями та навігаційними магнітометрами.

### Кодування кольорів кабелю

Більшість виробників використовують червоний колір для лінії високої напруги та чорний для землі. Інші кольори на власний розсуд виробника. Стандарт роз'єму [Pixhawk](https://github.com/pixhawk/Pixhawk-Standards/blob/master/DS-009%20Pixhawk%20Connector%20Standard.pdf) вимагає лише те, щоб контакт напруги спільного колектора (VCC) був червоним.

Кодування кольорів сигнальних проводів може допомогти визначити певні кабелі, що полегшить збирання вашого безпілотника.

Схема кодування кольорів, призначена для легкого ідентифікації кабелів, може дотримуватися наступних правил:

- Червоний і чорний кольори зарезервовані для живлення.
- Той самий тип сигналу повинен мати той самий колір.
- Колір сигналу не повторюється в роз'ємі для дротів, що прилягають один до одного.
- Проводові магістралі з однаковою кількістю контактів повинні мати унікальну послідовність кольорів. Це визначає тип кабелю. (Це особливо корисно для фотографій, які використовуються в посібнику).

Приклад кольорової позначки кабелю, розроблений згідно з цими правилами, є:

| Колір        | Назва    | Бажане використання                                           |
| ------------ | -------- | ------------------------------------------------------------- |
| ![red][1]    | Червоний | Напруга живлення                                              |
| ![green][5]  | Зелений  | Загальний призначення сигнал                                  |
| ![white][4]  | Білий    | Загального призначення сигнал                                 |
| ![yellow][3] | Жовтий   | Загальний призначення сигнал                                  |
| ![blue][6]   | Синій    | Повернення живлення, Сигнал управління з відкритим колектором |
| ![black][2]  | Чорний   | GND, Заземлення повернення живлення                           |


<!-- references for the image source.
This approach just allows more compact markdown -->

:::info Вищезазначені правила надані компанією Thunderfly та використовуються в їх кабельному дизайні.

Кодування кольорів кабелю для Thunderfly та деяких інших виробників наведено у розділах нижче. Ярлики контактів відповідають роз'єму на боці автопілота. Всі кабелі прямі (1:1). Якщо вони потребують кросовер (наприклад, UART), це повинно бути вирішено внутрішнім з'єднанням пристроїв.
:::

[1]: ../../assets/hardware/cables/red.png
[2]: ../../assets/hardware/cables/black.png
[3]: ../../assets/hardware/cables/yellow.png
[4]: ../../assets/hardware/cables/white.png
[5]: ../../assets/hardware/cables/green.png
[6]: ../../assets/hardware/cables/blue.png
