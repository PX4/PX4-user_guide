# Слідування місцевості/утримання

PX4 підтримує [Підтримка Місцевості](#terrain_following) та [Тримання Місцевості](#terrain_hold) у [Позиційному](../flight_modes_mc/position.md) та [Режимах Висоти](../flight_modes_mc/altitude.md), на *багторотих літальних апаратах* та *вертикальних злітно-посадкових апаратах у режимі БК*, які мають [датчик відстані](../sensor/rangefinders.md).

:::note PX4 "інтегровано" не підтримує слідування терену в місіях. *QGroundControl* може бути використаний для визначення місій, які *приблизно* слідують за тереном (це просто встановлює висоту точок шляху на основі висоти над тереном, де висота терену в точках шляху отримується з бази даних мапи).
:::

<a id="terrain_following"></a>

## Слідування місцевості

*Слідування за місцевістю* дозволяє транспортному засобу автоматично підтримувати відносно сталу висоту над рівнем землі при переміщенні на низьких висотах. Це корисно для уникнення перешкод і для підтримки постійної висоти під час польоту над різноманітним рельєфом (наприклад, для аерофотозйомки).

:::tip
Цю функцію можна активувати в режимах [Положення](../flight_modes_mc/position.md) та [Висота](../flight_modes_mc/altitude.md) на *багтрокерах* та *вертикально-взлітно-посадкових апаратах в режимі MC*, які мають [датчик відстані](../sensor/rangefinders.md).
:::

Коли ввімкнено *слідування за місцевістю*, PX4 використовує вихід оцінювача EKF для надання оцінки висоти, а оцінена висота місцевості (обчислена з вимірів датчиків відстані за допомогою іншого оцінювача) - для надання установленої точки висоти. При зміні відстані до землі установлена точка висоти коригується так, щоб зберегти висоту над землею постійною.

На великих висотах (коли оцінювач повідомляє, що дані від датчика відстані недійсні), транспортний засіб переходить до *слідування за висотою*, і, як правило, літає практично на постійній висоті над середнім рівнем моря (AMSL), використовуючи абсолютний висотомір для даних про висоту.

:::note
Точніше, транспортний засіб буде використовувати доступні обрані джерела висотних даних, як визначено [тут](../advanced_config/tuning_the_ecl_ekf.md#height).
:::

Підтримка терену включається, встановивши [MPC_ALT_MODE](../advanced_config/parameter_reference.md#MPC_ALT_MODE) на `1`.


<a id="terrain_hold"></a>

## Утримання місцевості

*Утримання місцевості* використовує датчик відстані, щоб допомогти транспортному засобу краще підтримувати постійну висоту над землею в режимах контролю висоти, коли він стоїть горизонтально на низькій висоті. Це дозволяє транспортному засобу уникнути зміни висоти через дрейф барометра або надмірні перешкоди барометру від омивання ротора.

:::note
Цю функцію можна ввімкнути в режимах [Позиція](../flight_modes_mc/position.md) та [Висота](../flight_modes_mc/altitude.md), на *мультикоптерах* і *транспортних засобах VTOL у режимі MC*, які мають [датчик відстані](../sensor/rangefinders.md).
:::

Під час горизонтального руху (`швидкість >` [MPC_HOLD_MAX_XY](../advanced_config/parameter_reference.md#MPC_HOLD_MAX_XY)) або вище висоти, на якій датчик відстані надає дійсні дані, транспортний засіб перейде в режим *слідування за висотою</2 >.</p>

Утримування рельєфу вмикається встановленням [MPC_ALT_MODE](../advanced_config/parameter_reference.md#MPC_ALT_MODE) на `2`.

:::note
*Утримання місцевості* реалізовано подібно до [відстеження місцевості](#terrain_following). Вона використовує вихід оцінювача EKF для надання оцінки висоти та оцінку висоти місцевості (розраховану на основі вимірів датчика відстані за допомогою окремого однорівневого оцінювача місцевості), щоб надати точку установки висоти. Якщо відстань до землі змінюється через зовнішні сили, точка установки висоти коригується, щоб забезпечити постійну висоту над землею.
:::
