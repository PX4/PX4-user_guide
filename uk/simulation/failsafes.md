# Симуляція запобігання відмовам

[Запобіжники відмов](../config/safety.md) визначають безпечні межі/умови за яких можна безпечно використовувати PX4, та дію яка буде виконана якщо спрацює запобіжник відмови (наприклад посадка, утримання позиції або повернення до зазначеної точки).

У SITL деякі запобіжники відмов за замовчуванням вимкнені, щоб забезпечити простіше використання симуляції. Ця тема пояснює, як ви можете перевірити критично важливу для безпеки поведінку в симуляції SITL перед тим, як спробувати її в реальному світі.

:::info Також можна перевірити запобіжники відмов використовуючи [HITL симуляцію](../simulation/hitl.md). HITL використовує нормальні параметри налаштувань вашого контролера польоту.
:::

## Втрата каналу зв'язку

Запобіжник _Втрати каналу зв'язку_ (недоступність зовнішніх даних через MAVLink) увімкнений за замовчуванням. Це робить симуляцію придатною до використання тільки з під'єднаним GCS, SDK або іншим додатком MAVLink.

Встановіть параметр [NAV_DLL_ACT](../advanced_config/parameter_reference.md#NAV_DLL_ACT) на бажану дію запобігання відмові для зміни поведінки. Наприклад встановіть у `0`, щоб вимкнути її.

:::info Всі параметри в SITL, включаючи цей, скидається якщо ви виконаєте `make clean`.
:::

## Втрата каналу радіо керування

Запобіжник _Втрати каналу РК_ (недоступність зовнішніх даних дистанційного керування) увімкнений за замовчуванням. Це робить симуляцію придатною до використання тільки з активним з'єднанням MAVLink або дистанційного керування.

Встановіть параметр [NAV_RCL_ACT](../advanced_config/parameter_reference.md#NAV_RCL_ACT) на бажану дію запобігання відмові для зміни поведінки. Наприклад встановіть у `0`, щоб вимкнути її.

:::info Всі параметри в SITL, включаючи цей, скидається якщо ви виконаєте `make clean`.
:::

## Низький заряд батареї

Батарею, що моделюється реалізовано таким чином щоб енергія ніколи не закінчувалась та за замовчуванням вона виснажується тільки до 50% її заряду, а отже і напруги, що доповідається. Це дозволяє тестувати індикацію батареї в GCS Ui без спрацювання реакцій на низький заряд, що може перервати інші тести.

Щоб змінити це мінімальне значення проценту заряду батареї, використовуйте параметр [SIM_BAT_MIN_PCT](../advanced_config/parameter_reference.md#SIM_BAT_MIN_PCT).

Для керування тим як швидко батарея вичерпається до мінімального значення використовуйте параметр [SIM_BAT_DRAIN](../advanced_config/parameter_reference.md#SIM_BAT_DRAIN).

:::tip
Змінивши [SIM_BAT_MIN_PCT](../advanced_config/parameter_reference.md#SIM_BAT_MIN_PCT) в польоті, ви також можете перевірити відновлення працездатності для симуляції неточної оцінки стану батареї або технології заряджання в повітрі.
:::

## Помилка датчику/системи

[Введення помилок](../debug/failure_injection.md) може бути використано для симуляції різного типу відмов у багатьох датчиках та системах. Наприклад, це може бути використано для імітації відсутнього або переривчастого сигналу GPS, сигналу РК який перервався або застиг на певному значенні, збої в системі уникнення, і багато іншого.

Наприклад, для імітації відмови сигналу GPS:

1. Увімкніть параметр [SYS_FAILURE_E_N](../advanced_config/parameter_reference.md#SYS_FAILURE_EN).
1. Введіть наступні команди на SITL екземплярі _pxh оболонки_:

   ```sh
   # Вимкнути (усі) GPS
   failure gps off

   # Увімкнути (усі) GPS
   failure gps ok
   ```

Дивіться [Введення системних помилок](../debug/failure_injection.md) для списку цільових датчиків і режимів відмови, що підтримуються.
