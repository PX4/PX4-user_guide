# Налаштування заданого пункту для багатороторного вертольота (Генератор Траєкторії)

Цей документ надає огляд параметрів налаштування багтроторного літального апарату, які змінюють _користувацький досвід_: наскільки швидко транспортний засіб реагує на рухи палиць або зміни напрямку в місіях, максимально допустима швидкість тощо.

Іншими словами, ця тема пояснює, як налаштувати параметри, які впливають на значення _бажаної величини_, а не ті, які впливають на те, наскільки добре транспортний засіб _слідує_ за величиною).

Алгоритм, який генерує ці точки встановлення, називається "генератор траєкторії".

:::warning
Цей посібник призначений для досвідчених користувачів / експертів.
:::

:::tip
Дотримуйтесь інструкцій у [Посібнику з налаштування PID для багатокоптерів](../config_mc/pid_tuning_guide_multicopter.md) _перш ніж_ робити будь-яке з налаштувань, описаних тут. Не використовуйте ці параметри настройки для виправлення поганого відстеження або вібрації!
:::

## Загальний огляд

Вхід до контролера P/PID - це _бажане установочне значення_, яке повинен намагатися відслідковувати транспортний засіб. [Налаштування PID](../config_mc/pid_tuning_guide_multicopter.md) ("Тонке налаштування") спрямоване на зменшення похибки між бажаним встановленим значенням та оцінкою стану транспортного засобу.

_бажана установка_ передається до P/PID controller є сам обчислений від _заданого параметру_ на основі положення палички (у режимах RC) або з команди місії. Вимагане установлення може дуже швидко змінюватися (наприклад, якщо користувач переміщує палицю від нуля до максимального значення як "крок"). Характеристики польоту транспортного засобу кращі, якщо відповідні бажані встановлені значення змінюються як "конус".

_Налаштування значення заданого значення_ ("налаштування на вищому рівні") використовується для визначення відповідності між _вимаганим_ та _бажаним_ заданими значеннями - тобто визначення "сходу" на якому бажане задане значення слідує за вимаганим заданим значенням.

:::tip
Погано налаштовані [P/PID коефіцієнти](../config_mc/pid_tuning_guide_multicopter.md) можуть призвести до нестабільності. Погано налаштовані значення _встановлених значень_ не можуть призвести до нестабільності, але можуть призвести до дуже різких або дуже неефективних реакцій на зміни встановлених значень.
:::

<a id="modes"></a>

## Підтримка траєкторій режимів польоту

[Режим місії](../flight_modes_mc/mission.md) використовує траєкторію з обмеженням ривку [постійно](../config_mc/mc_jerk_limited_type_trajectory.md).

[Режим позиціонування](../flight_modes_mc/position.md) підтримує [реалізації](#position-mode-implementations), перераховані нижче. Він використовує картографування на основі прискорення за замовчуванням; інші типи можна встановити за допомогою [MPC_POS_MODE](../advanced_config/parameter_reference.md#MPC_POS_MODE).

[Режим висоти](../flight_modes_mc/altitude.md) так само підтримує [реалізації](#altitude-mode-implementations), вибрані за допомогою [MPC_POS_MODE](../advanced_config/parameter_reference.md#MPC_POS_MODE), але _лише_ для згладжування вертикальної складової (тобто при керуванні висотою).

Жоден інший режим не підтримує налаштування траєкторії.

## Реалізації режиму позиціонування

Наступний список надає _загальний огляд_ різних реалізацій того, як вхід палиці інтерпретується та перетворюється на точки задання траєкторії:

- Заснований на прискоренні (за замовчуванням)
  - Горизонтальний вхід палиці відображений на встановлених точках прискорення.
  - Інтуїтивне відчуття палиці, оскільки це схоже на те, що ти тягнеш транспортний засіб.
  - Неочікувані зміни нахилу при досягненні швидкості руху.
  - Вертикальний вхід палиці відображений з обмеженим ривком траєкторії.
  - Встановлено у режим позиції за допомогою `MPC_POS_MODE=4`.
- [Jerk-limited](../config_mc/mc_jerk_limited_type_trajectory.md)
  - Використовується, коли потрібен плавний рух (наприклад: зйомка, картографування, вантаж).
  - Генерує симетричні плавні S-криві, де обмеження різкості та прискорення завжди гарантовані.
  - Можливо, не підходить для транспортних засобів / випадків використання, які вимагають швидкої відповіді - наприклад, гонщицькі квадрокоптери.
  - Встановлено у режим позиції за допомогою `MPC_POS_MODE=3`.
- **Просте керування позицією**
  - Палиці безпосередньо відображаються на встановлені точки швидкості без згладжування.
  - Корисно для налаштування контролю швидкості.
  - Встановлено у режим позиції за допомогою `MPC_POS_MODE=0`.

## Реалізації режиму висоти

Аналогічно до [реалізацій режиму позиціонування](#position-mode-implementations) це реалізації для інтерпретації вертикального введення палиці:

- [Jerk-limited](../config_mc/mc_jerk_limited_type_trajectory.md)
  - Згладжений вертикальний вхід.
  - Встановлено у режим висоти з `MPC_POS_MODE` 3 або 4.
- **Просте керування висотою**
  - Незгладжений вертикальний вхід.
  - Встановлено у режим висоти лише при використанні `MPC_POS_MODE=0`.
