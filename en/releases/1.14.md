## PX4-Autopilot v1.14 Release Notes

## Major Changes

### Actuator configuration UI

Starting from v1.14, mixer files aren't used anymore, instead [dynamic control allocation](https://docs.px4.io/main/en/concept/control_allocation.html) is used by default (It was an opt-in option for v1.13).

This means two things:
1. You will use the [actuator configuration UI](https://docs.px4.io/main/en/config/actuators.html) in QGC instead of editing mixer files
2. If you were using a mixer file for your custom vehicle for v1.13, you must re-configure the actuators to replace the mixer.

:::note
To use the new actuator configuration UI, you must have a QGC version of [v4.2.0](https://github.com/mavlink/qgroundcontrol/releases/tag/v4.2.0) or later!
:::

### Simulator naming

As OSRF is in process of retiring the old Gazebo, our [simulator](https://docs.px4.io/main/en/simulation/) naming convention has changed. The previous Gazebo is now called "Gazebo classic", and the newly released Gazebo Garden is called "Gazebo".

You can still use the old [Gazebo classic](https://docs.px4.io/main/en/sim_gazebo_classic/#running-the-simulation) simulation, however you should have Ubuntu 20.04 or older installed.

Since from Ubuntu 22.04 the Gazebo classic is not officially supported, and only the [new Gazebo](https://docs.px4.io/main/en/sim_gazebo_gz/) can be installed.

Simulation support for the new Gazebo is getting updated, but still lacks diverse set of vehicles available in Gazebo classic. Please feel free to contribute more simulation targets!

### ROS2 & XRCE-DDS bridge

Native [ROS2 support with micro XRCE-DDS bridge](https://docs.px4.io/main/en/ros/ros2_comm.html) was added.

This means that now without needing MAVROS, you can establish a direct connection to the ROS2 Data Distribution Service (DDS) through UDP, TCP, serial or other communication channels.

We were aware that a lot of users reported micro XRCE-DDS not working for v1.13, but for v1.14, it has been fully tested to work.

## Minor Changes

### Common

* Failsafe state machine rewrite & [web simulation](https://docs.px4.io/main/en/config/safety_simulation.html)
* Improved preflight failure check reporting (requires QGC version of [v4.2.0](https://github.com/mavlink/qgroundcontrol/releases/tag/v4.2.0) or later): https://github.com/PX4/PX4-Autopilot/pull/20030 and https://github.com/mavlink/qgroundcontrol/pull/10362
* [Package delivery in mission](https://docs.px4.io/main/en/advanced/package_delivery.html): For package delivery applications, inital support for payload delivery in mission for gripper actuator was added
* Manual control setpoint message redefinition: manual_control_setpoint.x, y, z, w -> roll, pitch, yaw, throttle; throttle scale [0,1] -> [-1,1] - https://github.com/PX4/PX4-Autopilot/pull/15949

### Control

* Land and take off again in mission: Landing doesn't disarm if the mission is not done - https://github.com/PX4/PX4-Autopilot/pull/19659
* Separate trajectory setpoint message: Message is now separate from vehicle_local_position_setpoint message. - https://github.com/PX4/PX4-Autopilot/pull/19622
* Bugfix: "Invalid setpoint" message on takeoff or mode switch: The message popped up as false positive depending on timing - https://github.com/PX4/PX4-Autopilot/pull/20581
* Bugfix: Step switching Altitude to Position: Switching from Altitude to Position with speed produced a jerk step - https://github.com/PX4/PX4-Autopilot/pull/20905

### Estimation

* [Multiple height source fusion](https://docs.px4.io/main/en/advanced_config/tuning_the_ecl_ekf.html#height)
* EKF2 start without magnetometer and barometer data: Until now, a mag and a baro was mandatory to run EKF2 - https://github.com/PX4/PX4-Autopilot/pull/20021
* Multirotor wind estimate improvements: More accurate bluff body drag model - https://github.com/PX4/PX4-Autopilot/pull/20848

### Sensors

* Battery estimation defaults, reporting improvements: Defaults: current based load compensation, higher empty cell voltage, shorter action delay - https://github.com/PX4/PX4-Autopilot/pull/19429, https://github.com/PX4/PX4-Autopilot/pull/19700, https://github.com/PX4/PX4-Autopilot/pull/19594, https://github.com/PX4/PX4-Autopilot/pull/19679
* SF45 rotation Lidar serial driver - https://github.com/PX4/PX4-Autopilot/pull/19891

### Simulation

* [Gazebo] Ignition Fuel for PX4: PX4 now has a repository for gazebo models in ignition fuel - https://app.gazebosim.org/PX4
* [Gazebo] Support for Gazebo garden with native ignition transport support: Added native ignition transport support for direct interaction with Gazebo and the simulation. Supported vehicles in Gazebo are X500(Multicopter), Plane, Standard VTOL - https://github.com/PX4/PX4-Autopilot/pull/20319
* [Gazebo-classic] Serializer for Gazebo sniffer: Added a sniffer for serializing gazebo related information - https://github.com/PX4/PX4-SITL_gazebo-classic/pull/937
* [Gazebo-classic] Motor failure plugin as a ros2 plugin: Motor failure plugin has been updated to be a ros2 plugin -	https://github.com/PX4/PX4-SITL_gazebo-classic/pull/862
* [Gazebo-classic] Addition of Omnicopter model: A fully actuated omnidirectional vehicle model has been added to Gazebo SITL - https://github.com/PX4/PX4-SITL_gazebo-classic/pull/866
* [Gazebo-classic] Addition of Advanced liftdrag plugin: Advanced liftdrag plugin that models nonlinear aerodynamics based on AVL - https://github.com/PX4/PX4-SITL_gazebo-classic/pull/901
* [Gazebo-classic] Addition of Safe landing world: Addition of safe landing world, for testing safe landing - https://github.com/PX4/PX4-SITL_gazebo-classic/pull/93
* [Gazebo-classic] Depricated Ubuntu Bionic reated tests: Removed testing due to EOL of Ubuntu Bionic - https://github.com/PX4/PX4-SITL_gazebo-classic/pull/974
* [SIH] Standalone sensor simulations in tree: Ability to simulate sensors in tree that was part of SIH is now a stand alone sensor module. Sensors include magnetometer, GPS, Barometer, Airspeed - https://github.com/PX4/PX4-Autopilot/pull/20137, https://github.com/PX4/PX4-Autopilot/pull/20137, https://github.com/PX4/PX4-Autopilot/tree/main/src/modules/simulation/sensor_airspeed_sim
* [SIH] Failure injection for battery simulation - https://github.com/PX4/PX4-Autopilot/commit/ebc1d7544e8146788c9e7cf5e8b64f60199240e4

### MAVLink

* MAVLink forwarding over USB: Forward MAVLink traffic to/from USB by default - https://github.com/PX4/PX4-Autopilot/pull/20745

### Multirotor

* Improved Follow-Me flight mode: Follow-me mode was improved for better user experience - https://github.com/PX4/PX4-Autopilot/pull/18026 | PX4 Dev Summit presentation - https://www.youtube.com/watch?v=rYYso87cmxA
* Improved Helicopter Support: Helicopter support has been updated - https://docs.px4.io/main/en/config_heli/
* Direction-based speed constraints for multirotors: Can define a different forward, backward and lateral speed	- https://github.com/PX4/PX4-Autopilot/pull/19257
* Allow yawing in hold mode: Let the pilot yaw the drone while staying in hold mode - https://github.com/PX4/PX4-Autopilot/pull/21399

### VTOL

* Quad-chute: enable to reset failure state	Reset failure state once operator triggeres transition to FW again - https://github.com/PX4/PX4-Autopilot/pull/20913
* Simplify Tailsitter transitions to FW in Stabilized: Adpat the tilt threshold automatically on configured max tilt setting - https://github.com/PX4/PX4-Autopilot/pull/21582
* Refactor uncommanded descend Quad-Chute: Enables to set altitdue error threshold to trigger a Quad-chute - https://github.com/PX4/PX4-Autopilot/pull/21598
* Enable control-surface-less Quad-tailsitters: Enables to use differential thrust to control full body attitude in FW mode on tailsitters - https://github.com/PX4/PX4-Autopilot/pull/20511
* Skip VTOL_Takeoff mission item if already in-air - https://github.com/PX4/PX4-Autopilot/pull/19985

### Fixed Wing

* Flaps/Spoiler refactor - https://github.com/PX4/PX4-Autopilot/pull/19329
* FW Position control: switch from L1 to NPFG guidance - https://github.com/PX4/PX4-Autopilot/pull/19603 | PX4 Dev Summit presentation video - https://www.youtube.com/watch?v=LY6hYBCdy-0
* Automatically apply learned airspeed scale in-air	- https://github.com/PX4/PX4-Autopilot/pull/19787
* Takeoff refactor/enhancements	- https://github.com/PX4/PX4-Autopilot/pull/19869
* FW landing refactor/enhancements -	https://github.com/PX4/PX4-Autopilot/pull/19871
* Scale minimum airspeed with wind strength	FW Position control: add option to scale min airspeed wtih wind magnitude - https://github.com/PX4/PX4-Autopilot/pull/20259
* Improve FW hand-launch takeoff - https://github.com/PX4/PX4-Autopilot/pull/20557
* Improve accelerated stall protection - https://github.com/PX4/PX4-Autopilot/pull/20636
* Add option to disable manual yaw inputs - https://github.com/PX4/PX4-Autopilot/pull/20647
* Disable airspeed rate input into TECS	airspeed rate estimation has shwon to be unreliable, so we decided to disable it for now - https://github.com/PX4/PX4-Autopilot/pull/21317
* Support flying at different airspeeds	Add airspeed to trim throttle mapping in TECS to support flying at different airspeeds - https://github.com/PX4/PX4-Autopilot/pull/21345

### Hardware Support

* Cubepilot Cube Orange+ - https://github.com/PX4/PX4-Autopilot/pull/20304
* Unicore GPS: Support for Holybro Unicore UM982 GPS - https://github.com/PX4/PX4-Autopilot/pull/21214
* VOXL2 Improved support - https://github.com/PX4/PX4-Autopilot/pull/21426
* Cubepilot Cube Black detection: Fixed Cube Black vs. Pixhawk 2 detection with CAN1 connected - https://github.com/PX4/PX4-Autopilot/pull/21342